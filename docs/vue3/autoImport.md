API 自动导入
`setup`语法让我们不用再一个一个的把变量和方法都`return`出去就能在模板上使用，大大的解放了我们的双手。然而对于一些常用的`Vue`API，比如`ref`、`computed`、`watch`等，还是每次都需要我们在页面上手动进行`import`。
我们可以通过`unplugin-auto-import`实现自动导入，无需`import`即可在文件里使用`Vue`的API。
安装

```js
npm i unplugin-auto-import -D
```

配置

```js
// vite.config.ts
import { defineConfig } from 'vite'
import AutoImport from 'unplugin-auto-import/vite'

export default defineConfig({
  plugins: [
    AutoImport({
      // dts: 'src/auto-imports.d.ts', // 可以自定义文件生成的位置，默认是根目录下
      imports: ['vue']
    })
  ]
})
```

安装配置完会自动生成`auto-imports.d.ts`文件。

```js
// auto-imports.d.ts
// Generated by 'unplugin-auto-import'
// We suggest you to commit this file into source control
declare global {
  const computed: typeof import('vue')['computed']
  const createApp: typeof import('vue')['createApp']
  const customRef: typeof import('vue')['customRef']
  const defineAsyncComponent: typeof import('vue')['defineAsyncComponent']
  const defineComponent: typeof import('vue')['defineComponent']
  const effectScope: typeof import('vue')['effectScope']
  const EffectScope: typeof import('vue')['EffectScope']
  const getCurrentInstance: typeof import('vue')['getCurrentInstance']
  const getCurrentScope: typeof import('vue')['getCurrentScope']
  const h: typeof import('vue')['h']
  const inject: typeof import('vue')['inject']
  const isReadonly: typeof import('vue')['isReadonly']
  const isRef: typeof import('vue')['isRef']
  // ...
}
export {}
```

使用

```js
<script lang="ts" setup name="OrderList">
// 不用import，直接使用ref
const count = ref(0)

onMounted(() => {
  console.log('mounted===')
})
</script>
```

上面我们在`vite.config.ts`的配置里只导入了`vue`，`imports: ['vue']`，除了`vue`的你也可以根据文档导入其他的如`vue-router`、`vue-use`等。
个人建议只对一些比较熟悉的API做自动导入，如`vue`的API我们在开发时都比较熟悉，闭着眼都能写出来，对于一些不大熟悉的像`VueUse`这种库，还是使用`import`更好一些，毕竟编辑器都有提示，不易写错。
解决`eslint`报错问题
在没有`import`的情况下使用会导致`eslint`提示报错，可以通过在`eslintrc.js`安装插件`**vue-global-api**`解决。

```js
// 安装依赖
npm i vue-global-api -D

// eslintrc.js
module.exports = {
  extends: [
    'vue-global-api'
  ]
}
```



<Vssue/>